[Unit]
Description=<%= service["name"].capitalize %> Container (via WireGuard)
After=wireguard.service
Requires=wireguard.service
BindsTo=wireguard.service
PartOf=wireguard.service

[Service]
Type=simple
TimeoutStartSec=0
Restart=on-failure
RestartSec=10

ExecStart=/usr/bin/docker compose -f <%= compose_file %> up <%= service["name"] %>
ExecStop=/usr/bin/docker compose -f <%= compose_file %> stop <%= service["name"] %>

[Install]
WantedBy=multi-user.target
